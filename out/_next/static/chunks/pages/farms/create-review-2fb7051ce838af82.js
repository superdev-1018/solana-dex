(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3439],{40782:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/farms/create-review",function(){return t(97926)}])},82187:function(e,n,t){"use strict";t.d(n,{p:function(){return a}});var i=t(47511);let a=e=>{let n=null,t=[],a=[],s=[];function l(){let s=n||(null!=e?e:new i.YW);return(t.length||a.length)&&s.add(...t,...a.reverse()),s}return{setRawTransaction:function(e){n=e},addInstruction:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];t.push(...n)},addEndInstruction:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];a.push(...n)},addInnerTransactions:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];s.push(...n)},spawnTransaction:l,spawnTransactionQueue:function(){return t.length||a.length?[...s,l()]:s}}}},70745:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var i=t(85893);t(67294);var a=t(66180),s=t(40471);function l(e){var n;let{noCoinIconBorder:t,haveAnime:l,iconSrc:r,token:o,isOptionToken:d,domRef:c,className:u,size:m="md",style:f,isRewardBadge:v,isRewardEnd:x,onClick:h}=e,j=null!==(n=null!=r?r:null==o?void 0:o.icons)&&void 0!==n?n:null==o?void 0:o.icon,w=!t,p="2xl"===m?"h-20 w-20":"lg"===m?"h-12 w-12":"md"===m?"h-8 w-8":"sm"===m?"h-5 w-5":"smi"===m?"h-6 w-6":"xs"===m?"w-4 h-4":"h-12 w-12";return(0,i.jsxs)(i.Fragment,{children:[x&&(0,i.jsx)(s.Z,{className:"h-8 w-8 rounded-full overflow-hidden ",src:"/icons/diagonal.svg",fallbackSrc:"/coins/unknown.svg",style:{position:"absolute",zIndex:100,opacity:20}}),(0,i.jsx)("div",{ref:c,className:"CoinAvatar flex items-center  ".concat(v?"rounded-full ring-1 ring-[#616A9D] p-1":""," ").concat(x?"opacity-30 ring-[#7B7EAF]":""," "),style:f,onClick:h,children:l?(0,i.jsxs)("div",{className:(0,a.m)("".concat(p," rounded-full swap-coin"),u),suppressHydrationWarning:!0,style:{"--delay":"".concat((1e3*Math.random()).toFixed(2),"ms")},children:[(0,i.jsx)(s.Z,{className:"front-face overflow-hidden transition-transform transform ".concat(w?"scale-[.7]":""),src:j,fallbackSrc:"/coins/unknown.svg"}),(0,i.jsxs)("div",{className:"line-group",children:[(0,i.jsx)("div",{className:"line-out",children:(0,i.jsx)("div",{className:"line-inner"})}),(0,i.jsx)("div",{className:"line-out",children:(0,i.jsx)("div",{className:"line-inner"})}),(0,i.jsx)("div",{className:"line-out",children:(0,i.jsx)("div",{className:"line-inner"})}),(0,i.jsx)("div",{className:"line-out",children:(0,i.jsx)("div",{className:"line-inner"})}),(0,i.jsx)("div",{className:"line-out",children:(0,i.jsx)("div",{className:"line-inner"})}),(0,i.jsx)("div",{className:"line-out",children:(0,i.jsx)("div",{className:"line-inner"})}),(0,i.jsx)("div",{className:"line-out",children:(0,i.jsx)("div",{className:"line-inner"})}),(0,i.jsx)("div",{className:"line-out",children:(0,i.jsx)("div",{className:"line-inner"})}),(0,i.jsx)("div",{className:"line-out",children:(0,i.jsx)("div",{className:"line-inner"})}),(0,i.jsx)("div",{className:"line-out",children:(0,i.jsx)("div",{className:"line-inner"})}),(0,i.jsx)("div",{className:"line-out",children:(0,i.jsx)("div",{className:"line-inner"})}),(0,i.jsx)("div",{className:"line-out",children:(0,i.jsx)("div",{className:"line-inner"})})]}),(0,i.jsx)(s.Z,{className:"back-face overflow-hidden transition-transform transform ".concat(w?"scale-[.7]":""),src:j,fallbackSrc:"/coins/unknown.svg"})]}):(0,i.jsxs)("div",{className:(0,a.m)("".concat(p," relative rounded-full"),u),style:{background:"linear-gradient(126.6deg, rgba(171, 196, 255, 0.2) 28.69%, rgba(171, 196, 255, 0) 100%)"},children:[(0,i.jsx)(s.Z,{className:"".concat(p," rounded-full overflow-hidden transition-transform transform ").concat(w?"scale-[.7]":""),src:j,fallbackSrc:"/coins/unknown.svg"}),!1]})})]})}},14033:function(e,n,t){"use strict";t.d(n,{S:function(){return s}});var i=t(99881),a=t(84207);function s(e,n){var t;let s=e=>(0,i.Z)(e.toFixed(null!==(t=null==n?void 0:n.decimalPlace)&&void 0!==t?t:2,null==n?void 0:n.format,null==n?void 0:n.rounding),{fractionLength:"auto",...n}),l=(0,a.Z)(e);try{let e=l.toFixed(0),t=e.length;if(!(null==n?void 0:n.disabled)&&t>9)return"".concat(s(l.div(1e9)),"B");if(!(null==n?void 0:n.disabled)&&t>6)return"".concat(s(l.div(1e6)),"M");if(!(null==n?void 0:n.disabled)&&t>3)return"".concat(s(l.div(1e3)),"K");return"".concat(s(l))}catch(e){return"0"}}},99881:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var i=t(72573);function a(e){let{groupSeparator:n=",",fractionLength:t=2,groupSize:a=3}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===e?"0":[e=>(0,i.B)(e),e=>"auto"===t?e:function(e,n){var t;let[,i="",a="",s=""]=null!==(t=e.match(/(-?)(\d*)\.?(\d*)/))&&void 0!==t?t:[];return s?s.length<n?String(e):Number(e).toFixed(n):String(e)}(e,t),e=>{var t;let[,i="",s="",l=""]=null!==(t=e.match(/(-?)(\d*)\.?(\d*)/))&&void 0!==t?t:[],r=[...s].reduceRight((e,t,i,s)=>{let l=s.length-1-i;return t+(0!==l&&l%a==0?n:"")+e},"");return l?"".concat(i).concat(r,".").concat(l):"".concat(i).concat(r)}].reduce((e,n)=>n(e),e)}},18074:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var i=t(81451),a=t(51523),s=t(84207),l=t(72573),r=t(99881);function o(e,n){try{var t,o;let d=(0,s.Z)(null!=e?e:0),c=d.mul((null==n?void 0:n.alreadyPercented)?1:100).toFixed(null!==(t=null==n?void 0:n.fixed)&&void 0!==t?t:2);if((0,i.eq)(d,0))return"0%";if(!(null==n?void 0:n.exact)&&c===0..toFixed(null!==(o=null==n?void 0:n.fixed)&&void 0!==o?o:2))return(null==n?void 0:n.alwaysSigned)?"<+0.01%":"<0.01%";return(null==n?void 0:n.alwaysSigned)?"".concat((0,i.gt)(c,0)?"+":"-").concat((0,r.Z)((0,i.gt)(c,0)?(0,l.B)(c):(0,l.B)((0,a.dC)(c,-1))),"%"):"".concat((0,r.Z)(c,{fractionLength:null==n?void 0:n.fixed}),"%")}catch(e){return"0%"}}},95865:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var i=t(14033);function a(e,n){return e?"$".concat((0,i.S)(e,{...n,disabled:!(null==n?void 0:n.autoSuffix)})):"0"}},56053:function(e,n,t){"use strict";t.d(n,{j:function(){return p}});var i=t(85893),a=t(91371),s=t(13521),l=t(57435),r=t(2148),o=t(31166),d=t(99522),c=t(54531),u=t(54592),m=t(48162),f=t(34495),v=t(51800),x=t(92618),h=t(3363),j=t(18074),w=t(95865);function p(){let e=(0,s.Z)(e=>e.poolId),n=(0,r.O)(e=>e.hydratedInfos),t=(0,l.Z)(e=>e.jsonInfos),p=(0,o.ZP)(e=>e.tokens),g=(0,a.ZP)(e=>e.isMobile),Z=t.find(n=>(0,h.ZP)(n.id)===e),N=n.find(n=>n.ammId===e),b={...Z,...N,baseToken:Z?p[Z.baseMint]:void 0,quoteToken:Z?p[Z.quoteMint]:void 0};return(0,i.jsx)(f.Z,{type:g?"item-card":"list-table",itemClassName:g?"grid-cols-[1fr,2fr]":void 0,list:[{id:e,pool:b}],getItemKey:e=>e.id,labelMapper:[{label:"Pool",cssGridItemWidth:"2fr"},{label:"TVL"},{label:"APR",renderLabel:()=>(0,i.jsxs)(v.Z,{children:[(0,i.jsx)("div",{children:"APR"}),(0,i.jsxs)(x.Z,{children:[(0,i.jsx)(m.Z,{className:"ml-1 cursor-help",size:"sm",heroIconName:"question-mark-circle"}),(0,i.jsx)(x.Z.Panel,{children:(0,i.jsx)("div",{className:"max-w-[300px]",children:"APR based on trading fees earned by the pool in the past 30D. Farming reward APR will be calculated once the farm is live and users have staked."})})]})]})}],renderRowItem:e=>{var n,t,a,s,l,r,o,m,f,x;let{item:p,label:g}=e;return"Pool"===g?p.id?(0,i.jsxs)(v.Z,{className:"gap-1 items-center",children:[(0,i.jsx)(c.Z,{token1:null===(n=p.pool)||void 0===n?void 0:n.baseToken,token2:null===(t=p.pool)||void 0===t?void 0:t.quoteToken,size:"sm"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[null!==(m=null===(a=p.pool)||void 0===a?void 0:null===(s=a.baseToken)||void 0===s?void 0:s.symbol)&&void 0!==m?m:"UNKNOWN","-",null!==(f=null===(l=p.pool)||void 0===l?void 0:null===(r=l.quoteToken)||void 0===r?void 0:r.symbol)&&void 0!==f?f:"UNKNOWN"]}),(0,i.jsx)(d.U,{showDigitCount:8,textClassName:"text-[#abc4ff80] text-xs",canCopy:!1,children:(0,h.ZP)(null===(o=p.pool)||void 0===o?void 0:o.ammId)})]})]}):"--":"TVL"===g?(0,i.jsx)(u.Z,{className:"justify-center h-full",children:(null===(x=p.pool)||void 0===x?void 0:x.liquidity)?(0,w.Z)(p.pool.liquidity,{decimalPlace:0}):"--"}):"APR"===g?(0,i.jsx)(u.Z,{className:"justify-center h-full",children:p.pool.apr30d?(0,j.Z)(p.pool.apr30d,{alreadyPercented:!0}):"--"}):void 0}})}},97926:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return V}});var i=t(85893),a=t(91371),s=t(95657),l=t(75640),r=t(82187),o=t(8667),d=t(91148),c=t(34003),u=t(98360),m=t(56419),f=t(90547),v=t(9191),x=t(3363),h=t(4465),j=t(14209),w=t(51523),p=t(71375),g=t(53607),Z=t(57435),N=t(2148),b=t(42186),y=t(80582),k=t(53002),P=t(59277),T=t(13521),I=t(43724);async function S(e){let{onReceiveFarmId:n,...t}=e;return(0,o.ZP)(async e=>{let{transactionCollector:i,baseUtils:{owner:a,connection:s}}=e,{rewards:o}=T.Z.getState(),{valid:S,reason:A}=(0,I.zh)();(0,c.Z)(S,A);let{valid:F,reason:C}=(0,I.f6)(o);(0,c.Z)(F,C);let{tokenAccounts:E,tokenAccountRawInfos:R}=k.Z.getState();(0,r.p)();let{poolId:M}=T.Z.getState(),{jsonInfos:D}=Z.Z.getState(),{programIds:B}=P.Z.getState(),q=D.find(e=>e.id===M),O=E.map(e=>(0,x.ZP)(e.mint));(0,c.Z)(q,"pool json info not founded");let _=o.map(e=>{var n,t;let i=e.token;if((0,c.Z)(e.startTime,"reward start time is required"),(0,c.Z)(e.endTime,"reward end time is required"),(0,c.Z)(e.amount,"reward amount is required"),!(0,h.aT)(null===(n=e.token)||void 0===n?void 0:n.mint,b.DA)){let n=O.includes((0,x.ZP)(null===(t=e.token)||void 0===t?void 0:t.mint));(0,c.Z)(n,"token not existed in user's wallet")}(0,c.Z)(i,"can't find selected reward token");let a=(0,m.V1)(e.startTime).getTime(),s=(0,m.V1)(e.endTime).getTime(),l=(0,w.hi)(e.amount,(0,f.nB)(s-a).seconds),r=(0,p.Z)((0,w.dC)(l,(0,j.Bd)(1,i.decimals)));return{rewardOpenTime:(0,p.Z)((0,w.hi)(a,1e3)),rewardEndTime:(0,p.Z)((0,w.hi)(s,1e3)),rewardMint:"sol"===i.id?y.YG:i.mint,rewardPerSecond:r,rewardType:e.isOptionToken?"Option tokens":"Standard SPL"}}),L="4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R",Y=q.lpMint,K=E.find(e=>(0,h.aT)(e.mint,L));(0,c.Z)(null==K?void 0:K.publicKey,"lockMintTokenAccount not found");let{innerTransaction:V,address:z}=await l.l6j.makeCreateFarmInstruction({poolInfo:{lpMint:(0,x.uI)(Y),lockInfo:{lockMint:(0,x.uI)(L),lockVault:(0,x.uI)("FrspKwj8i3pNmKwXreTveC4fu7KL5ZbGeXdZBe2XViu1")},version:6,rewardInfos:_,programId:B.FarmV6},connection:s,userKeys:{owner:a,tokenAccounts:R}}),U=(0,x.ZP)(z.farmId);async function X(){let{poolId:e,farmId:n}=T.Z.getState(),{jsonInfos:t}=N.O.getState();if(!e||!n)return;let i=t.find(n=>n.ammId===e);if(!i)return;let s=i.lpMint,r=B.FarmV6,o=(0,x.ZP)((await l.l6j.getAssociatedAuthority({programId:r,poolId:(0,x.uI)(e)})).publicKey),c=(0,x.ZP)(l.l6j.getAssociatedLedgerPoolAccount({programId:r,poolId:(0,x.uI)(n),mint:(0,x.uI)(s),type:"lpVault"})),m={id:n,lpMint:s,version:6,programId:(0,x.ZP)(r),authority:o,lpVault:c,rewardPeriodMax:g.DX,rewardPeriodMin:g.x4,rewardPeriodExtend:g.Md,upcoming:!0,creator:(0,x.ZP)(a),rewardInfos:await (0,u.ZP)(_,async n=>{let t=(0,x.ZP)(await l.l6j.getAssociatedLedgerPoolAccount({programId:r,poolId:(0,x.uI)(e),mint:(0,x.uI)(n.rewardMint),type:"rewardVault"}));return{rewardMint:(0,x.ZP)(n.rewardMint),rewardOpenTime:(0,p.Z)(n.rewardOpenTime).toNumber(),rewardEndTime:(0,p.Z)(n.rewardEndTime).toNumber(),rewardPerSecond:(0,p.Z)(n.rewardPerSecond).toNumber(),rewardVault:t,rewardType:n.rewardType}})};(0,v.mM)("USER_CREATED_FARMS",e=>(0,d.jX)(null!=e?e:[],m))}null==n||n(U),(0,c.Z)(V,"createFarm valid failed"),i.add(V,{...t,cacheTransaction:!0,txHistoryInfo:{title:"Create New Farm",description:"Farm ID: ".concat(U.slice(0,4),"...").concat(U.slice(-4))},onTxSuccess(){for(var e,n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];X(),null===(e=t.onTxSuccess)||void 0===e||e.call(t,...i)}})})}var A=t(49641),F=t(31555),C=t(99522),E=t(43067),R=t(54592),M=t(57571),D=t(51800),B=t(81451),q=t(72573),O=t(92224),_=t(3113),L=t(56053),Y=t(11163),K=t(67294);function V(){var e;let[n,{on:t,off:l}]=(0,O.ZP)(!1),r=(0,k.Z)(e=>e.balances),o=(0,T.Z)(e=>e.rewards),{pathname:d}=(0,Y.useRouter)(),c=(0,a.ZP)(e=>e.isMobile),u=(0,A.Z)(e=>e.refreshFarmInfos),[m,f]=(0,K.useState)(String(Date.now())),v=(0,a.ZP)(e=>e.isApprovePanelShown);(0,K.useEffect)(()=>{f(String(Date.now()))},[d]);let j=null===(e=o.find(e=>{var n;return(0,h.aT)(null===(n=e.token)||void 0===n?void 0:n.mint,y.PD)}))||void 0===e?void 0:e.amount,p=r[(0,x.ZP)(y.PD)],g=(0,B.eg)(null!=p?p:0,(0,w.IH)(0,null!=j?j:300));(0,K.useEffect)(()=>{T.Z.getState().isRoutedByCreateOrEdit||(0,F.Eh)("/farms",{queryProps:{currentTab:"Ecosystem"}})},[]);let Z=(0,i.jsx)(E.Z,{className:"frosted-glass-teal px-16 self-stretch mobile:w-full",isLoading:v,size:c?"sm":"lg",validators:[{should:g,fallbackProps:{children:"Insufficient RAY balance"}}],onClick:async()=>{S({onReceiveFarmId(e){T.Z.setState({farmId:e})},onTxSentFinally:()=>{t(),function(e,n){var t;let i=0;if(0<(null!==(t=n.loopCount)&&void 0!==t?t:1/0)){let t=globalThis.setInterval(()=>{var a;e(),(i+=1)>=(null!==(a=n.loopCount)&&void 0!==a?a:1/0)&&globalThis.clearInterval(t)},n.intervalTime)}}(()=>{A.Z.getState().refreshFarmInfos()},{loopCount:3,intervalTime:6e4})}})},children:"Create Farm"}),N=(0,i.jsxs)(R.Z,{className:"mt-4 text-sm font-medium items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-[#abc4ff80]",children:"Fee:"})," ",(0,i.jsx)("span",{className:"text-[#abc4ff]",children:"300 RAY"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-[#abc4ff80]",children:"Est. transaction fee:"})," ",(0,i.jsx)("span",{className:"text-[#abc4ff]",children:"0.002 SOL"})]})]}),b=(0,i.jsx)(E.Z,{className:"frosted-glass-skygray mobile:w-full",size:c?"sm":"lg",onClick:F.Bv,children:"Edit"});return(0,i.jsx)(M.Z,{metaTitle:"Farms - Raydium",mobileBarTitle:"Create Farm",children:(0,i.jsxs)("div",{className:"self-center w-[min(720px,90vw)] py-4",children:[!c&&(0,i.jsx)("div",{className:"pb-8 text-2xl mobile:text-lg font-semibold justify-self-start text-white",children:"Create Farm"}),(0,i.jsx)("div",{className:"mb-8 text-xl mobile:text-lg font-semibold justify-self-start text-white",children:"Review farm details"}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("div",{className:"mb-3 text-[#abc4ff] text-sm font-medium justify-self-start",children:"Pool"}),(0,i.jsx)(L.j,{})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("div",{className:"mb-3 text-[#abc4ff] text-sm font-medium justify-self-start",children:"Farm rewards"}),(0,i.jsx)(_.D,{canUserEdit:!1})]}),(0,i.jsxs)("div",{className:"font-medium text-sm mobile:text-xs text-justify leading-snug text-[#abc4ff80] mb-8",children:[(0,i.jsx)("span",{className:"text-[#DA2EEF]",children:"Please note:"})," Rewards allocated to farms cannot be withdrawn after farming starts. Newly created farms generally appear on Raydium 10-30 minutes after creation, depending on Solana network status. A one-time fee of 300 RAY is required to create a farm, which will be deposited into the Raydium treasury."]}),n?(0,i.jsx)("div",{className:"text-[#39d0d8] font-medium text-center text-sm my-4 mobile:mx-4",children:"Your farm has been created successfully and will be live on the UI shortly"}):(0,i.jsxs)("div",{className:"text-[#DA2EEF] font-medium text-center text-sm my-4 mobile:mx-4",children:["Creating a farm requires a one-time 300 RAY fee. Your RAY balance: ",(0,q.B)(p)||0," RAY"]}),n?(0,i.jsxs)(R.Z,{children:[(0,i.jsxs)(D.Z,{className:"w-full gap-2 justify-center my-8",children:[(0,i.jsx)(D.Z,{className:"items-center text-sm mobile:text-xs font-medium text-[#ABC4FF] mobile:text-2xs",children:(0,i.jsx)("div",{className:"mr-1",children:"Your Farm ID: "})}),(0,i.jsx)(C.U,{canCopy:!0,showDigitCount:"all",className:"text-white mobile:text-sm font-medium",children:T.Z.getState().farmId})]}),(0,i.jsx)(E.Z,{className:"frosted-glass-skygray mobile:w-full",size:c?"sm":"lg",onClick:()=>{(0,F.Eh)("/farms",{queryProps:{currentTab:"Ecosystem"}}),u(),setTimeout(()=>{T.Z.setState({rewards:[(0,s.k8)()]}),T.Z.setState({isRoutedByCreateOrEdit:!1}),l()},1e3)},children:"Back to Farms"})]}):c?(0,i.jsxs)(R.Z,{className:"gap-5 items-center",children:[N,(0,i.jsxs)(R.Z,{className:"items-center gap-3 w-full",children:[Z,b]})]}):(0,i.jsxs)(D.Z,{className:"gap-5 justify-center items-start",children:[(0,i.jsxs)(R.Z,{className:"items-center",children:[Z,N]}),b]})]})})}}},function(e){e.O(0,[4740,7571,8667,3129,9774,2888,179],function(){return e(e.s=40782)}),_N_E=e.O()}]);