(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5009],{10073:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clmm/create-position",function(){return n(58987)}])},6262:function(e,t,n){"use strict";n.d(t,{Ek:function(){return a},TL:function(){return u},vt:function(){return d},yc:function(){return m}});var l=n(75640),i=n(27713),s=n(4465),o=n(51523),r=n(84207);function c(e){let t=l.c2c.getPriceAndTick(e);return(0,i.JS)(t)}function a(e){let t=l.c2c.getTickPrice(e);return(0,i.JS)(t)}function d(e){let{coin1:t,coin2:n,reverse:l,ammPool:s,maxDecimals:a}=e;if(s)try{var d,m;let e=a||(t||n?Math.max(null!==(d=null==t?void 0:t.decimals)&&void 0!==d?d:0,null!==(m=null==n?void 0:n.decimals)&&void 0!==m?m:0):6),u=100===s.ammConfig.tradeFeeRate,p=u?.01:.2,x=(0,i.eZ)(null==s?void 0:s.state.currentPrice),f=(0,o.kg)(x?(0,o.dC)(x,1-p):0,1/10**e),b=(0,o.kg)(x?(0,o.dC)(x,1+p):0,1/10**e),{price:v,tick:h}=c({poolInfo:s.state,baseIn:!0,price:(0,i.I2)((0,r.Z)(f))}),{price:y,tick:j}=c({poolInfo:s.state,baseIn:!0,price:(0,i.I2)((0,r.Z)(b))});if(l)return{priceLowerTick:j,priceLower:(0,o.hi)(1,y),priceUpperTick:h,priceUpper:(0,o.hi)(1,v)};return{priceLowerTick:h,priceLower:v,priceUpperTick:j,priceUpper:y}}catch(e){return}}function m(e){let{p:t,coin1:n,coin2:l,reverse:o,ammPool:a,maxDecimals:d}=e,m=o?l:n;try{let{price:e,tick:n}=c({poolInfo:a.state,baseIn:(0,s.aT)(a.state.mintA.mint,null==m?void 0:m.mint),price:(0,i.I2)((0,r.Z)(Math.max(Number(t),1/10**(d||6))))});return{price:e,tick:n}}catch(e){return}}function u(e){let{min:t,max:n,coin1:l,coin2:i,reverse:s,ammPool:o,maxDecimals:r}=e,c=m({p:t,coin1:l,coin2:i,ammPool:o,reverse:s,maxDecimals:r}),a=m({p:n,coin1:l,coin2:i,ammPool:o,reverse:s,maxDecimals:r});return{priceLower:c.price,priceLowerTick:c.tick,priceUpper:a.price,priceUpperTick:a.tick}}},13039:function(e,t,n){"use strict";n.d(t,{B:function(){return p},Z:function(){return u}});var l=n(8667),i=n(53002),s=n(34003),o=n(72573),r=n(75640),c=n(96662),a=n(42186),d=n(475),m=n(94678);function u(){let{currentAmmPool:e=m.ZP.getState().currentAmmPool,onSuccess:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.ZP)(async n=>{var l,i;let{transactionCollector:s}=n,{coin1:r,coin2:c,coin1Amount:a,coin2Amount:d}=m.ZP.getState(),{innerTransactions:u,nftAddress:x}=await p(e);s.add(u,{onTxAllSuccess(){null==t||t({nftAddress:x})},txHistoryInfo:{title:"Position Created",forceErrorTitle:"Error creating position",description:"Added ".concat((0,o.B)(a)," ").concat(null!==(l=null==r?void 0:r.symbol)&&void 0!==l?l:"--"," and ").concat((0,o.B)(d)," ").concat(null!==(i=null==c?void 0:c.symbol)&&void 0!==i?i:"--")}})})}async function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.ZP.getState().currentAmmPool,{priceLower:t,priceUpper:n,coin1:l,coin2:o,coin1Amount:u,coin2Amount:p,liquidity:x,priceLowerTick:f,priceUpperTick:b}=m.ZP.getState(),{tokenAccountRawInfos:v}=i.Z.getState(),{connection:h}=c.ZP.getState(),{owner:y}=i.Z.getState();(0,s.Z)(h,"no rpc connection"),(0,s.Z)(y,"wallet not connected"),(0,s.Z)(e,"not seleted amm pool"),(0,s.Z)(void 0!==b,"not set priceUpperTick"),(0,s.Z)(void 0!==f,"not set priceLowerTick"),(0,s.Z)(n,"not set priceUpper"),(0,s.Z)(t,"not set priceLower"),(0,s.Z)(l,"not set coin1"),(0,s.Z)(u,"not set coin1Amount"),(0,s.Z)(o,"not set coin2"),(0,s.Z)(p,"not set coin2Amount"),(0,s.Z)(x,"not set liquidity");let j=(0,a.Dn)(l)||(0,a.Dn)(o),{innerTransactions:g,address:Z}=await r.c2c.makeOpenPositionInstructionSimple({connection:h,liquidity:x,poolInfo:e.state,ownerInfo:{feePayer:y,wallet:y,tokenAccounts:v,useSOLBalance:j},tickLower:Math.min(f,b),tickUpper:Math.max(f,b),slippage:.015,computeBudgetConfig:await (0,d.u)()});return{innerTransactions:g,nftAddress:String(Z.nftMint)}}},7931:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var l=n(67294),i=n(12839);function s(e,t,n){var s;let o="all .4s cubic-bezier(0.4, 0, 0.2, 1)",[r,c]=(0,l.useState)(null!==(s=null==n?void 0:n.defaultHasWrapped)&&void 0!==s&&s);(0,l.useEffect)(function(){if(i.N9||!(null==n?void 0:n.defaultHasWrapped))return;let l=e.current,s=t.current;if(!l||!s)return;let o=l.getBoundingClientRect(),r=s.getBoundingClientRect(),c=r.top-o.top,a=o.top<r.top?1:-1;l.style.setProperty("transition",""),s.style.setProperty("transition",""),l.style.setProperty("transform","translateY(".concat(c*a,"px)")),s.style.setProperty("transform","translateY(".concat(-c*a,"px)"))},[]);let a=(0,l.useCallback)(()=>{let n=e.current,l=t.current;if(!n||!l)return;let i=n.getBoundingClientRect(),s=l.getBoundingClientRect(),a=s.top-i.top,d=i.top<s.top?1:-1;n.style.setProperty("transition",o),l.style.setProperty("transition",o),r?(n.style.setProperty("transform","translateY(0px)"),l.style.setProperty("transform","translateY(0px)"),c(!1)):(n.style.setProperty("transform","translateY(".concat(a*d,"px)")),l.style.setProperty("transform","translateY(".concat(-a*d,"px)")),c(!0))},[r,e,t]),d=(0,l.useCallback)(()=>{let n=e.current,l=t.current;n&&l&&(n.style.setProperty("transition",o),l.style.setProperty("transition",o),n.style.setProperty("transform","translateY(0px)"),l.style.setProperty("transform","translateY(0px)"))},[r,e,t]);return(0,l.useEffect)(()=>{let n=e.current,l=t.current,i=()=>{null==n||n.style.setProperty("pointerEvents","none")},s=()=>{null==n||n.style.setProperty("pointerEvents","")};return null==n||n.addEventListener("transitionstart",i),null==n||n.addEventListener("transitionend",s),null==l||l.addEventListener("transitionstart",i),null==l||l.addEventListener("transitionend",s),()=>{null==n||n.removeEventListener("transitionstart",i),null==n||n.removeEventListener("transitionend",s),null==l||l.removeEventListener("transitionstart",i),null==l||l.removeEventListener("transitionend",s)}},[e,t]),[r,{toggleSwap:a,resetSwapPosition:d}]}},58625:function(e,t,n){"use strict";n.d(t,{a:function(){return x}});var l=n(85893),i=n(53002),s=n(51523),o=n(81451),r=n(42186),c=n(72573),a=n(48162),d=n(28948),m=n(51800),u=n(92618),p=n(66180);function x(e){let{solLeastBalance:t,className:n,tooltipText:x}=e,f=(0,i.Z)(e=>e.solBalance),b=(0,s.hi)(f,10**r.Bk);return(0,l.jsx)(d.U,{children:b&&(0,o.lt)(b,null!=t?t:r.kn)&&(0,o.eg)(b,0)&&(0,l.jsxs)(m.Z,{className:(0,p.m)("text-sm mt-2 text-[#D8CB39] items-center justify-center",n),children:["SOL balance: ",(0,c.B)(b)," ",(0,l.jsxs)(u.Z,{placement:"bottom-right",children:[(0,l.jsx)(a.Z,{size:"sm",heroIconName:"question-mark-circle",className:"ml-2 cursor-help"}),(0,l.jsx)(u.Z.Panel,{children:(0,l.jsx)("p",{className:"w-80",children:null!=x?x:"SOL is needed for Solana network fees. A minimum balance of ".concat(null!=t?t:r.kn," SOL is\n                recommended to avoid failed transactions. This swap will leave you with less than \n                ").concat(null!=t?t:r.kn," SOL.")})})]})]})})}},58987:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eg}});var l=n(85893),i=n(67294),s=n(90482),o=n(66180),r=n(91371),c=n(6262),a=n(13039),d=n(94678),m=n(52784),u=n(76961),p=n(31166),x=n(11163),f=n(94355),b=n(56603),v=n(4465),h=n(16938),y=n(26842),j=n(99779),g=n(96662),Z=n(25222),P=n(80582);function N(e){var t,n;let l={ammId:String(null!==(n=null!==(t=e.ammId)&&void 0!==t?t:e.ammid)&&void 0!==n?n:"")};return(0,h.dI)(l)}var k=n(31555),w=n(27713),C=n(53002),S=n(43067),T=n(54531),A=n(97664),L=n(54592),E=n(88132),I=n(28948),B=n(60421),R=n(48162),F=n(57571),M=n(33674),D=n(51800),U=n(3363),z=n(18074),O=n(62952),_=n(95865),H=n(81451),q=n(8951),Y=n(14209),$=n(51523),V=n(71375),W=n(84207),X=n(72573),J=n(32825),Q=n(47857),K=n(7931),G=n(92224),ee=n(99023),et=n(40816);let en="mobile:justify-center mobile:w-1/2";function el(e){let{coin1:t,coin2:n,fee:s,focusSide:o,onChangeFocus:r}=e,c=(0,i.useMemo)(()=>{let e=[];return t&&e.push({label:"".concat(t.symbol||"Unknown"," price"),value:t.id,className:en}),n&&e.push({label:"".concat(n.symbol||"Unknown"," price"),value:n.id,className:en}),e},[t,n]),a=(0,i.useCallback)(e=>{r(e.value===n.id?"coin2":"coin1")},[n]);return(0,l.jsxs)("div",{className:"flex justify-between items-center mb-[27px] mobile:flex-col mobile:items-baseline mobile:mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center mobile:mb-2",children:[(0,l.jsx)(T.Z,{size:"lg",token1:t,token2:n}),(0,l.jsxs)("span",{className:"ml-2 text-xl font-medium mobile:text-lg text-white",children:[(null==t?void 0:t.symbol)||"-"," / ",(null==n?void 0:n.symbol)||"-"]}),(0,l.jsxs)("div",{className:"px-2.5 py-1 ml-2 rounded-lg text-sm text-secondary-title bg-active-tab-bg",children:["Pool Fee ",s||"-"]})]}),(0,l.jsx)("div",{className:"flex items-center mobile:w-full",children:t&&n&&(0,l.jsx)(et.Z,{classNames:"ml-4 mobile:w-full mobile:ml-0",tabs:c,selectedValue:"coin1"===o?t.id:null==n?void 0:n.id,onChange:a})})]})}var ei=n(58625),es=n(54103),eo=n(67858),er=n(96256);function ec(){return(0,l.jsxs)("div",{className:"absolute text-sm flex flex-col border-1.5 border-[#abc4ff40] text-center justify-center items-center p-2 w-full h-full bg-[#141041] bg-opacity-80 z-10 rounded-xl",children:[(0,l.jsx)(R.Z,{className:"mb-1",heroIconName:"lock-closed",size:"sm"}),"Current price is outside your selected range. Single-asset deposit only."]})}var ea=n(71122),ed=n(6994),em=n(70745),eu=n(65927),ep=n(48678),ex=n(40471),ef=n(99522);function eb(e){let{open:t,coin1:n,coin2:s,coin1Amount:c,coin2Amount:a,decimals:d,currentPrice:m,position:u,gettedNFTAddress:p,totalDeposit:x,feeRate:f,inRange:b,onBackToAllMyPools:v,onConfirm:h,onClose:y}=e,j=i.useRef(!1),g=Math.min(d,6),Z=(0,r.ZP)(e=>e.isApprovePanelShown),P=i.useCallback(e=>{null==h||h(e),j.current=!0},[y]),N=!!p,k=i.useCallback(()=>{y()},[y]);return(0,l.jsx)(eu.Z,{open:t,onClose:k,children:e=>{let{close:t}=e;return(0,l.jsx)(ed.Z,{className:(0,o.m)("p-6 mobile:py-4 mobile:px-2 rounded-3xl w-[min(480px,95vw)] mx-8 border-1.5 border-[rgba(171,196,255,0.2)]  bg-cyberpunk-card-bg shadow-cyberpunk-card"),size:"lg",children:N?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(D.Z,{className:"justify-between items-center mb-6 mobile:mb-3",children:[(0,l.jsx)("div",{className:"text-xl font-semibold text-white mobile:text-base",children:"Deposit Confirmed"}),(0,l.jsx)(R.Z,{className:"text-[#ABC4FF] cursor-pointer",heroIconName:"x",onClick:t})]}),(0,l.jsxs)("div",{className:"my-4 mx-4 space-y-4",children:[(0,l.jsx)("div",{className:"text-sm text-[#ABC4FF] font-medium",children:"A new NFT representing your Concentrated Liquidity position is now in your wallet."}),(0,l.jsxs)(L.Z,{className:"gap-2 items-center",children:[(0,l.jsx)(ex.Z,{src:"https://cloudflare-ipfs.com/ipfs/Qme9ErqmQaznzpfDACncEW48NyXJPFP7HgzfoNdto9xQ9P/02.jpg",className:"h-44 w-44"}),(0,l.jsxs)(D.Z,{className:"text-sm text-[#ABC4FF] font-medium gap-2",children:[(0,l.jsx)("div",{children:"NFT Mint:"}),(0,l.jsx)(ef.U,{canCopy:!0,canExternalLink:!0,addressType:"token",children:p})]})]}),(0,l.jsxs)("div",{className:"text-sm text-[#ABC4FF] font-medium",children:[(0,l.jsx)("strong",{className:"text-base",children:"DO NOT"})," burn this NFT or you will be unable to remove liquidity! If you send the NFT to another wallet, only the new wallet will be able to remove liquidity."]})]}),(0,l.jsx)(L.Z,{className:"items-center mt-5 mobile:mt-3",children:(0,l.jsx)("div",{className:"self-stretch",children:(0,l.jsx)(L.Z,{children:(0,l.jsx)(S.Z,{className:"frosted-glass-teal",onClick:v,children:"View My Pools"})})})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(D.Z,{className:"justify-between items-center mb-6 mobile:mb-3",children:[(0,l.jsxs)("div",{className:"text-xl font-semibold text-white mobile:text-base",children:["Preview Deposit to ",null==n?void 0:n.symbol," / ",null==s?void 0:s.symbol]}),(0,l.jsx)(R.Z,{className:"text-[#ABC4FF] cursor-pointer",heroIconName:"x",onClick:t})]}),(0,l.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"My Position"}),(0,l.jsxs)("div",{className:"text-sm flex leading-[18px] flex-col pt-2.5",children:[(0,l.jsxs)("div",{className:"flex justify-between mb-2.5",children:[(0,l.jsxs)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:[(0,l.jsx)(em.Z,{className:"inline-block mr-1",size:"sm",token:n}),null==n?void 0:n.symbol]}),(0,l.jsxs)("span",{children:[(0,X.B)(c)," ",null==n?void 0:n.symbol]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:[(0,l.jsx)(em.Z,{className:"inline-block mr-1",size:"sm",token:s}),null==s?void 0:s.symbol]}),(0,l.jsxs)("span",{children:[(0,X.B)(a)," ",null==s?void 0:s.symbol]})]}),(0,l.jsxs)("div",{className:"flex justify-between mt-2 pl-1",children:[(0,l.jsx)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:"Fee tier"}),(0,l.jsx)("span",{children:(0,z.Z)((f||0)/1e6)})]})]})]}),(0,l.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsxs)("div",{className:"text-sm flex justify-between items-end leading-[18px] font-medium mb-2 mobile:text-xs",children:[(0,l.jsx)("span",{className:"flex text-sm text-secondary-title leading-[18px] mr-2",children:"Current Price"}),m?(0,ep.C)((0,X.B)(m,{decimalLength:g})):"0"," ",null==s?void 0:s.symbol," per ",null==n?void 0:n.symbol]}),(0,l.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Selected Range"}),(0,l.jsx)("span",{children:b?(0,l.jsxs)(D.Z,{className:"items-center bg-[#142B45] rounded text-xs text-[#39D0D8] py-0.5 px-1 ml-2",children:[(0,l.jsx)(R.Z,{size:"xs",iconSrc:"/icons/check-circle.svg"}),(0,l.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"In Range"})]}):(0,l.jsxs)(D.Z,{className:"items-center bg-[#DA2EEF]/10 rounded text-xs text-[#DA2EEF] py-0.5 px-1 ml-2",children:[(0,l.jsx)(R.Z,{size:"xs",iconSrc:"/icons/warn-stick.svg"}),(0,l.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"Out of Range"})]})})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("div",{className:"border-1.5 justify-center text-center flex-1 border-light-blue-opacity rounded-xl p-3 mobile:p-2",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Min Price"}),(0,l.jsx)("div",{className:"text-xl my-3",children:(0,X.B)(null==u?void 0:u.min,{decimalLength:g})}),(0,l.jsxs)("div",{className:"text-sm text-[#abc4ff80]",children:[null==s?void 0:s.symbol," per ",null==n?void 0:n.symbol]})]}),(0,l.jsxs)("div",{className:"border-1.5 justify-center text-center flex-1 border-light-blue-opacity rounded-xl p-3 mobile:p-2",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Max Price"}),(0,l.jsx)("div",{className:"text-xl my-3",children:(0,X.B)(null==u?void 0:u.max,{decimalLength:g})}),(0,l.jsxs)("div",{className:"text-sm text-[#abc4ff80]",children:[null==s?void 0:s.symbol," per ",null==n?void 0:n.symbol]})]})]})]}),(0,l.jsx)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Total Deposit"}),(0,l.jsx)("span",{className:"text-lg",children:x})]})}),(0,l.jsx)(L.Z,{className:"items-center mt-5 mobile:mt-3",children:(0,l.jsx)("div",{className:"self-stretch",children:(0,l.jsx)(L.Z,{children:(0,l.jsx)(S.Z,{className:"frosted-glass-teal",isLoading:Z,onClick:()=>P(t),children:"Confirm Deposit"})})})})]})})}})}var ev=n(74365),eh=n(63675);let{ContextProvider:ey,useStore:ej}=(0,J.Z)({hasAcceptedPriceChange:!1,coinInputBox1ComponentRef:(0,i.createRef)(),coinInputBox2ComponentRef:(0,i.createRef)(),liquidityButtonComponentRef:(0,i.createRef)()});function eg(){return(0,l.jsxs)(ey,{children:[(0,l.jsx)(eN,{}),(0,l.jsxs)(F.Z,{mobileBarTitle:"Concentrated",metaTitle:"Concentrated - Raydium",children:[(0,l.jsx)(eZ,{}),(0,l.jsx)(ek,{})]})]})}function eZ(){return(0,l.jsx)(D.Z,{className:(0,o.m)("-mt-4 mobile:mt-0.5 mb-8 mobile:mb-2 sticky z-auto -top-4 mobile:top-0 mobile:-translate-y-2 mobile:bg-[#0f0b2f] mobile:hidden items-center justify-between"),children:(0,l.jsx)(S.Z,{type:"text",className:"text-sm text-[#ABC4FF] opacity-50 px-0",prefix:(0,l.jsx)(R.Z,{heroIconName:"chevron-left",size:"sm"}),onClick:()=>{(0,k.ES)("/clmm/pools")},children:"Back to all pools"})})}function eP(){return(0,l.jsx)(D.Z,{className:(0,o.m)("-mt-4 mobile:mt-0.5 mb-8 mobile:mb-2 sticky z-10 -top-4 mobile:top-0 mobile:-translate-y-2 mobile:bg-[#0f0b2f] items-center justify-between"),children:(0,l.jsx)(S.Z,{type:"text",className:"text-sm text-[#ABC4FF] px-0",prefix:(0,l.jsx)(R.Z,{heroIconName:"chevron-left"}),onClick:()=>{(0,k.ES)("/clmm/pools")}})})}function eN(){return!function(){let{query:e,pathname:t,replace:n}=(0,x.useRouter)(),l=(0,d.ZP)(e=>e.hydratedAmmPools),s=(0,d.ZP)(e=>e.currentAmmPool),o=(0,g.ZP)(e=>e.connection),c=(0,p.ZP)(e=>e.getToken),a=(0,r.ZP)(e=>e.inCleanUrlMode),[m,u]=(0,i.useState)(!1),k=(0,i.useCallback)(e=>l.find(t=>t.idString===e),[l]);(0,i.useEffect)(()=>{t.includes("/clmm/create-position")||u(!1)},[t]),(0,i.useEffect)(()=>{let e=()=>u(!1);return null==globalThis||globalThis.addEventListener("beforeunload",e),()=>null==globalThis?void 0:globalThis.removeEventListener("beforeunload",e)},[]),(0,y.Z)(async()=>{if(!t.includes("/clmm/create-position")||!o||m)return;let{logWarning:n}=f.Z.getState(),{ammId:i}=N(e);if(i&&l.length>0){let e=i?k(i):void 0,t=(0,Z.w)(e);e&&t?d.ZP.setState({currentAmmPool:e,coin1:e.base,coin2:e.quote}):(d.ZP.setState({coin1:c(P.PD),coin2:c(P.LA)}),l.length>0&&n("can't find Liquidity pool with url ammId"))}l.length>0&&u(!0)},[m,o,t,e,l,k]);let w=(0,i.useCallback)((0,b.P)((e,t)=>{n({pathname:e,query:t},void 0,{shallow:!0})},{delay:500}),[n]);(0,j.P)(()=>{if(!t.includes("/clmm/create-position")||!m||a)return;let n=N(e),l=(0,h.dI)({ammId:null==s?void 0:s.idString}),i=!(0,v.Ek)(n,l);i&&w(t,l)},[m,a,s,e,t])}(),(0,m.Z)(),(0,u.Z)(),!function(){(0,p.ZP)(e=>e.getToken);let e=(0,p.ZP)(e=>e.tokens);(0,i.useEffect)(()=>{let{coin1:t,coin2:n,currentAmmPool:l}=d.ZP.getState();!t&&!n&&Object.keys(e).length&&l&&d.ZP.setState({coin1:l.base,coin2:l.quote})},[e])}(),null}function ek(){var e,t,n,o,m,u,x;let f=(0,C.Z)(e=>e.getBalance),[b,h,y]=(0,d.ZP)(e=>[e.chartPoints,e.loadChartPointsAct,e.lazyLoadChart]),g=(0,C.Z)(e=>e.connected),[Z,{off:P,on:N}]=(0,G.ZP)(!1),B=(0,r.ZP)(e=>e.isApprovePanelShown),F=(0,C.Z)(e=>e.checkWalletHasEnoughBalance),D=(0,d.ZP)(e=>e.timeBasis),J=(0,d.ZP)(e=>e.coin1),et=(0,d.ZP)(e=>e.coin1Amount),en=(0,d.ZP)(e=>e.coin2),es=(0,d.ZP)(e=>e.coin2Amount),eo=(0,d.ZP)(e=>e.focusSide),er=(0,d.ZP)(e=>e.currentAmmPool),ea=(0,d.ZP)(e=>e.hydratedAmmPools),ed=(0,d.ZP)(e=>e.priceUpper),em=(0,d.ZP)(e=>e.priceLower),eu=(0,d.ZP)(e=>e.refreshConcentrated),ep=(0,p.ZP)(e=>e.refreshTokenPrice),[ex,ef]=(0,i.useState)({coin1:void 0,coin2:void 0,coin1Amount:void 0,coin2Amount:void 0,decimals:6,totalDeposit:void 0,feeRate:void 0,inRange:!1,currentPrice:void 0,currentAmmPool:void 0}),ey="".concat(null==er?void 0:er.idString,"-").concat(eo),eg=function(e){let t=(0,i.useRef)();return(0,i.useEffect)(()=>{t.current=e},[e]),t.current}(ey),eZ=(0,i.useRef)(),eN=(0,i.useRef)({lower:void 0,upper:void 0}),ek=J||en?Math.max(null!==(n=null==J?void 0:J.decimals)&&void 0!==n?n:0,null!==(o=null==en?void 0:en.decimals)&&void 0!==o?o:0):6,eC=(0,v.aT)(null==er?void 0:er.state.mintA.mint,J),eS="coin1"===eo,eT=eS&&eC||!eC&&!eS,eA=(0,i.useMemo)(()=>{let e=b?(0,ee.Mn)(b):void 0;return eT?e:e?e.map(e=>({x:1/e.x,y:e.y})).reverse():void 0},[b,eT]),eL=(0,i.useMemo)(()=>Math.pow(-1,eC?eS?0:1:eS?1:0),[eC,eS]),eE=er?[er.state[d.v$[D]].priceMin,er.state[d.v$[D]].priceMax]:[void 0,void 0];eT||(eE.reverse(),eE[0]=eE[0]?1/eE[0]:eE[0],eE[1]=eE[1]?1/eE[1]:eE[1]);let{coinInputBox1ComponentRef:eI,coinInputBox2ComponentRef:eB,liquidityButtonComponentRef:eR}=ej(),eF=(0,i.useRef)(null),eM=(0,i.useRef)(null),[,{toggleSwap:eD}]=(0,K.H)(eF,eM);(0,j.P)(e=>{let[t]=e;t&&t!==eo&&eD()},[eo]);let eU=(0,i.useMemo)(()=>er?(0,w.eZ)(eT?er.state.currentPrice:new s.Z(1).div(er.state.currentPrice)):void 0,[null==er?void 0:er.state.currentPrice.toFixed(),eo]),ez=er?(0,w.eZ)(er.state.currentPrice):void 0,eO=er&&eU&&void 0!==em&&void 0!==ed?[(0,V.Z)(ed||0,ek).lt((0,V.Z)(eU||0,ek)),(0,V.Z)(em||0,ek).gt((0,V.Z)(eU||0,ek))]:[!1,!1];eS||eO.reverse();let[e_,eH]=eO;(0,i.useEffect)(()=>{y&&er&&h(er.idString)},[null==er?void 0:er.idString,h,y]),(0,i.useEffect)(()=>{e_&&d.ZP.setState({coin1Amount:"0"}),eH&&d.ZP.setState({coin2Amount:"0"})},[e_,eH]),(0,i.useEffect)(()=>()=>d.ZP.setState({lazyLoadChart:!1,focusSide:"coin1",userCursorSide:"coin1"}),[]);let eq=J&&(!(0,H.$u)(et)||F((0,O.n)(J,et,{alreadyDecimaled:!0}))),eY=en&&(!(0,H.$u)(es)||F((0,O.n)(en,es,{alreadyDecimaled:!0}))),e$=(0,i.useRef)(null);(0,i.useEffect)(()=>{d.ZP.setState({scrollToInputBox:()=>{var e;return null===(e=e$.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"center"})}})},[e$]);let eV=(0,Y.db)((null===(e=null==er?void 0:er.state.currentPrice)||void 0===e?void 0:e.toFixed(20))||"")+2,eW=(0,i.useMemo)(()=>(0,c.vt)({coin1:J,coin2:en,ammPool:er,reverse:!eT,maxDecimals:Math.max(ek,eV)}),[J,en,er,eT,ek,eV]);(0,i.useEffect)(()=>{ey!==eg&&eW&&(d.ZP.setState(eW),eN.current.lower=eW.priceLowerTick,eN.current.upper=eW.priceUpperTick)},[eW,ey,eg]);let[eX,eJ]=(0,i.useState)([]),eQ=(0,i.useCallback)(e=>eJ(t=>[null==e?void 0:e.toExact(),t[1]]),[]),eK=(0,i.useCallback)(e=>eJ(t=>[t[0],null==e?void 0:e.toExact()]),[]),eG=eX.filter(e=>!!e).reduce((e,t)=>e.add((0,W.Z)(t)),(0,W.Z)(0)),{ratio1:e0,ratio2:e1}=(0,ee.dO)({currentPrice:ez,coin1InputDisabled:e_,coin2InputDisabled:eH,coin1Amount:et,coin2Amount:es}),e2=(0,Q.z)(e=>{let t={price:e.min,tick:eN.current.lower};if(!er)return t;if(e[eh.e6.Min]>=e[eh.e6.Max]){let e=eS?J:en,t=eN.current.upper-er.state.tickSpacing*eL,{price:n,tick:l}=(0,c.Ek)({poolInfo:er.state,baseIn:(0,v.aT)(er.state.mintA.mint,null==e?void 0:e.mint),tick:t});return eN.current.lower=l,d.ZP.setState({priceLowerTick:l,priceLower:n}),{price:(0,q.V)({val:n.toFixed(10)}),tick:l}}return t}),e4=(0,i.useCallback)(e=>{let{side:t,userInput:n,...l}=e;if(!er||!J||!en||isNaN(l.min)||isNaN(l.max))return;let i=(0,c.TL)({...l,coin1:J,coin2:en,ammPool:er,reverse:!eS,maxDecimals:Math.max(ek,eV)}),s=t===eh.e6.Min,o=s?"priceLowerTick":"priceUpperTick";return n&&t?(eN.current[s?"lower":"upper"]=i[o],s&&d.ZP.setState({priceLowerTick:i[o],priceLower:i.priceLower}),s||d.ZP.setState({priceUpperTick:i[o],priceUpper:i.priceUpper})):(eN.current={lower:i.priceLowerTick,upper:i.priceUpperTick},d.ZP.setState(i)),i},[(0,U.ZP)(null==J?void 0:J.mint),(0,U.ZP)(null==en?void 0:en.mint),null==er?void 0:er.idString,eS,eV,ek]),e5=(0,i.useCallback)(e=>{let{p:t,isMin:n,isIncrease:l}=e;if(!er||!J||!en)return;let i=eS?J:en,s=n?"lower":"upper",o=eN.current[s]+(l?er.state.tickSpacing:-1*er.state.tickSpacing)*eL,{price:r}=(0,c.Ek)({poolInfo:er.state,baseIn:(0,v.aT)(er.state.mintA.mint,null==i?void 0:i.mint),tick:o});return n&&(0,H.eg)(r.toFixed(20),eZ.current.getPosition().max.toFixed(20))?(0,W.Z)(t):(eN.current[s]=o,n&&d.ZP.setState({priceLower:r,priceLowerTick:o}),n||d.ZP.setState({priceUpper:r,priceUpperTick:o}),r)},[null==J?void 0:J.mint,null==en?void 0:en.mint,null==er?void 0:er.idString,eL,ek]),e3=(0,i.useCallback)(()=>{ef({coin1:J,coin2:en,coin1Amount:et,coin2Amount:es,decimals:ek,totalDeposit:(0,_.Z)(eG),feeRate:null==er?void 0:er.ammConfig.tradeFeeRate,inRange:!eO.some(e=>e),currentPrice:er?(0,w.eZ)(eC?er.state.currentPrice:new s.Z(1).div(er.state.currentPrice)):void 0,currentAmmPool:er}),N()},[N,J,en,et,es,ek,eG,er,eO]),e6=(0,i.useMemo)(()=>({isStable:(null==er?void 0:er.ammConfig.tradeFeeRate)===100,baseIn:eT,points:eA||[],initMinBoundaryX:null==eW?void 0:eW.priceLower,initMaxBoundaryX:null==eW?void 0:eW.priceUpper}),[eA,eW,null==er?void 0:er.ammConfig.tradeFeeRate,eT]),[e8,e7]=(0,i.useState)();return(0,l.jsxs)(E.Z,{domRef:e$,wrapperClassName:"w-[min(912px,100%)] self-center cyberpunk-bg-light",className:"p-6 mobile:py-5 mobile:px-3",children:[(0,l.jsx)("div",{className:"absolute -left-8 top-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,l.jsx)(eP,{})}),(0,l.jsx)(el,{coin1:J,coin2:en,fee:(0,z.Z)(null==er?void 0:er.tradeFeeRate,{exact:!0}),focusSide:eo,onChangeFocus:e=>d.ZP.setState({focusSide:e})}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row flex-gap-1 gap-3 mb-3",children:[(0,l.jsxs)(L.Z,{className:"gap-5 bg-dark-blue rounded-xl flex flex-col w-full sm:w-1/2 px-3 py-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between align-top mb-3",children:[(0,l.jsx)("div",{className:"text-base leading-[22px] text-secondary-title ",children:"Deposit Amount"}),(0,l.jsx)(M.Z,{disabled:Z,refreshKey:"clmm-pools",freshFunction:()=>{ep(),eu()}})]}),(0,l.jsxs)("div",{ref:eF,className:"relative",children:[e_&&(0,l.jsx)(ec,{}),(0,l.jsx)(A.Z,{className:"mb-4 py-2 mobile:py-1 px-3 mobile:px-2 border-1.5 border-[#abc4ff40]",disabled:B,disabledInput:!er||e_,noDisableStyle:!0,componentRef:eI,value:er?(0,X.B)(et):void 0,haveHalfButton:!0,HTMLTitleTooltip:(0,U.ZP)(null==J?void 0:J.mint),topLeftLabel:J?"".concat((0,U.ZP)(J.mint).slice(0,5),"...").concat((0,U.ZP)(J.mint).slice(-5)):void 0,haveCoinIcon:!0,maxValue:J&&f(J)?(0,O.n)(J,(0,$.dC)(f(J),.985),{alreadyDecimaled:!0}):void 0,onPriceChange:eQ,disableTokenSelect:!0,onUserInput:e=>{d.ZP.setState({coin1Amount:e,userCursorSide:"coin1"})},onEnter:e=>{var t,n,l,i;e&&(en||null===(t=eB.current)||void 0===t||null===(n=t.selectToken)||void 0===n||n.call(t),en&&es&&(null===(l=eR.current)||void 0===l||null===(i=l.click)||void 0===i||i.call(l)))},token:J})]}),(0,l.jsxs)("div",{ref:eM,className:"relative",children:[eH&&(0,l.jsx)(ec,{}),(0,l.jsx)(A.Z,{className:"py-2 mobile:py-1 px-3 mobile:px-2 border-1.5 border-[#abc4ff40]",componentRef:eB,disabled:B,disabledInput:!er||eH,noDisableStyle:!0,value:er?(0,X.B)(es):void 0,HTMLTitleTooltip:(0,U.ZP)(null==en?void 0:en.mint),topLeftLabel:en?"".concat((0,U.ZP)(en.mint).slice(0,5),"...").concat((0,U.ZP)(en.mint).slice(-5)):void 0,haveHalfButton:!0,haveCoinIcon:!0,maxValue:en&&f(en)?(0,O.n)(en,(0,$.dC)(f(en),.985),{alreadyDecimaled:!0}):void 0,onPriceChange:eK,disableTokenSelect:!0,onEnter:e=>{var t,n,l,i;e&&(J||null===(t=eI.current)||void 0===t||null===(n=t.selectToken)||void 0===n||n.call(t),J&&et&&(null===(l=eR.current)||void 0===l||null===(i=l.click)||void 0===i||i.call(l)))},onUserInput:e=>{d.ZP.setState({coin2Amount:e,userCursorSide:"coin2"})},token:en})]})]}),(0,l.jsxs)("div",{className:"border-1.5 border-[#abc4ff40]  rounded-xl px-3 py-4",children:[(0,l.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Total Deposit"}),(0,l.jsx)("span",{className:"text-lg leading-[18px]",children:er&&((0,H.$u)(et)||(0,H.$u)(es))?(0,_.Z)(eG):"--"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Deposit Ratio"}),(0,l.jsxs)("span",{className:"text-lg flex leading-[18px]",children:[er&&(0,l.jsx)(T.Z,{size:"sm",token1:J,token2:en}),er&&((0,H.$u)(et)||(0,H.$u)(es))?"".concat(null!=e0?e0:"--","% / ").concat(null!=e1?e1:"--","%"):"--"]})]})]}),e_||eH?(0,l.jsx)(I.U,{children:(0,l.jsxs)("div",{className:"flex items-center p-3 bg-[#2C2B57] rounded-xl text-sm text-[#D6CC56]",children:[(0,l.jsx)(R.Z,{size:"sm",className:"mr-1.5",heroIconName:"exclamation-circle"}),"Your position will not trade or earn fees until price moves into your range."]})}):"",(0,l.jsx)(S.Z,{className:"frosted-glass-teal w-full mt-auto",componentRef:eR,isLoading:B,validators:[{should:g,forceActive:!0,fallbackProps:{onClick:()=>r.ZP.setState({isWalletSelectorShown:!0}),children:"Connect Wallet"}},{should:er,fallbackProps:{children:"Pool Not Found"}},{should:(0,H.gt)((0,$.lu)(ed,em),(0,$.hi)(eU,1e3)),fallbackProps:{children:"Range too small"}},{should:J&&en,fallbackProps:{children:"Select a token"}},{should:(0,H.$u)(et)||(0,H.$u)(es),fallbackProps:{children:"Enter an amount"}},{should:eq,fallbackProps:{children:"Insufficient ".concat(null!==(m=null==J?void 0:J.symbol)&&void 0!==m?m:""," balance")}},{should:eY,fallbackProps:{children:"Insufficient ".concat(null!==(u=null==en?void 0:en.symbol)&&void 0!==u?u:""," balance")}}],onClick:()=>{e3()},children:"Preview"}),(0,l.jsx)(ei.a,{})]}),(0,l.jsxs)("div",{className:"relative bg-dark-blue min-h-[180px] rounded-xl w-full sm:w-1/2 px-3 py-4 ".concat(er?"":"pointer-events-none select-none"),children:[!er&&(0,l.jsx)("div",{className:"absolute inset-0 z-10 grid grid-child-center backdrop-blur-md text-[#abc4ff]",children:ea.length?"Pool Not Found":"Loading..."}),(0,l.jsx)(ev.Z,{poolFocusKey:ey,title:(0,l.jsx)("div",{className:"text-base leading-[22px] text-secondary-title mb-3",children:"Set Price Range"}),ref:eZ,chartOptions:e6,currentPrice:eU,priceMin:eE[0],priceMax:eE[1],priceLabel:eS?"".concat(null==en?void 0:en.symbol," per ").concat(null==J?void 0:J.symbol):"".concat(null==J?void 0:J.symbol," per ").concat(null==en?void 0:en.symbol),timeBasis:D,decimals:ek,onPositionChange:e4,onInDecrease:e5,onAdjustMin:e2,showZoom:!0,height:200}),(0,l.jsx)(ew,{})]})]}),(0,l.jsx)(eb,{open:Z,coin1:ex.coin1,coin2:ex.coin2,coin1Amount:ex.coin1Amount,coin2Amount:ex.coin2Amount,decimals:ex.decimals,position:null===(t=eZ.current)||void 0===t?void 0:t.getPosition(),totalDeposit:null!==(x=ex.totalDeposit)&&void 0!==x?x:(0,_.Z)(0),feeRate:ex.feeRate,inRange:ex.inRange,currentPrice:ex.currentPrice,gettedNFTAddress:e8,onConfirm:e=>(0,a.Z)({currentAmmPool:ex.currentAmmPool,onSuccess(e){let{nftAddress:t}=e;e7(t)}}),onBackToAllMyPools:()=>{eu(),(0,k.Eh)("/clmm/pools",{queryProps:{currentTab:d.u0.MY_POOLS}})},onClose:()=>{P(),e7(void 0)}})]})}function ew(e){let{className:t}=e,n=(0,d.ZP)(e=>e.currentAmmPool),i=(0,ea.HU)({ammPool:n}),s=(0,r.ZP)(e=>e.isMobile);return(0,l.jsxs)(L.Z,{className:(0,o.m)("bg-[#141041] py-3 my-1 rounded-xl gap-2",t),children:[(0,l.jsxs)(D.Z,{className:"items-center gap-2",children:[(0,l.jsx)("div",{className:"text-base leading-[22px] text-secondary-title",children:"Estimated APR"}),(0,l.jsx)(eo.T,{}),(0,l.jsx)("div",{className:"font-medium text-base mobile:text-sm text-white",children:(0,z.Z)(null==i?void 0:i.apr)}),(0,l.jsx)(er.n,{className:"ml-auto"})]}),n&&(0,l.jsx)(B.Z,{className:"border-1.5 border-[#abc4ff40] py-3 px-4 rounded-xl",children:(0,l.jsx)(es.E,{type:"poolTickInfo",colCount:s?1:2,poolInfo:n})})]})}}},function(e){e.O(0,[4740,9916,7571,8667,7664,4109,3610,9774,2888,179],function(){return e(e.s=10073)}),_N_E=e.O()}]);